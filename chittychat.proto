syntax = "proto3";
package main;

option go_package = "github.com/axrez/disys-mini-project-2;disys_mini_project_2";

service ChittyChat {
    rpc Publish (PublishMessage) returns (EmptyReturn);
    rpc Subscribe (SubscribeMessage) returns (stream BroadcastMessage);
    rpc Join (JoinMessage) returns (JoinReplyMessage);
    rpc Leave (LeaveMessage) returns (EmptyReturn);
}

message PublishMessage {
    string message = 1;
    int32 id = 2;
    int32 lTime = 3;
}

message BroadcastMessage {
    string message = 1;
    int32 lTime = 2;
}

message SubscribeMessage {
    int32 id = 1;
    int32 lTime = 2;
}

message JoinMessage {
    string name = 1;
    int32 lTime = 2;
}

message LeaveMessage {
    int32 id = 1;
    int32 lTime = 2;
}

message EmptyReturn {}

message JoinReplyMessage {
    int32 id = 1;
    int32 lTime = 3;
}